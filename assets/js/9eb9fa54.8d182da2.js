"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9384],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return g}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),g=i,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||r;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3020:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var a=n(3117),i=n(102),r=(n(7294),n(3905)),l=["components"],o={id:"migrating-angularJS-tutorial",title:"Migrating an Existing AngularJS Project",sidebar_label:"AngularJS - Migrating to single-spa"},s=void 0,p={unversionedId:"migrating-angularJS-tutorial",id:"version-4.x/migrating-angularJS-tutorial",title:"Migrating an Existing AngularJS Project",description:"Project Setup",source:"@site/versioned_docs/version-4.x/migrating-angularJS-tutorial.md",sourceDirName:".",slug:"/migrating-angularJS-tutorial",permalink:"/docs/4.x/migrating-angularJS-tutorial",editUrl:"https://github.com/single-spa/fr.single-spa.js.org/blob/master/website/versioned_docs/version-4.x/migrating-angularJS-tutorial.md",tags:[],version:"4.x",frontMatter:{id:"migrating-angularJS-tutorial",title:"Migrating an Existing AngularJS Project",sidebar_label:"AngularJS - Migrating to single-spa"},sidebar:"version-4.x/docs",previous:{title:"React - Migrating to single-spa",permalink:"/docs/4.x/migrating-react-tutorial"},next:{title:"Resources",permalink:"/docs/4.x/examples"}},c=[{value:"Project Setup",id:"project-setup",children:[],level:2},{value:"Step One: Create a single-spa config",id:"step-one-create-a-single-spa-config",children:[{value:"a) importing without using import",id:"a-importing-without-using-import",children:[],level:3},{value:"b) Connect the config file",id:"b-connect-the-config-file",children:[],level:3}],level:2},{value:"Step Two: Register the application",id:"step-two-register-the-application",children:[],level:2},{value:"Step Three: Setup Lifecycle Functions",id:"step-three-setup-lifecycle-functions",children:[],level:2},{value:"Step Four: Adjust your HTML file",id:"step-four-adjust-your-html-file",children:[{value:"a) Prevent auto bootstrapping",id:"a-prevent-auto-bootstrapping",children:[],level:3},{value:"b) Create a Template",id:"b-create-a-template",children:[],level:3},{value:"c) Create a Directive",id:"c-create-a-directive",children:[],level:3}],level:2}],u={toc:c};function d(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"project-setup"},"Project Setup"),(0,r.kt)("p",null,"You can find the code needed to follow along ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/alocke12992/single-spa-angular-migration-starter"},"here"),". You can find the completed ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/alocke12992/single-spa-angular-migration"},"code for this tutorial here"),"."),(0,r.kt)("p",null,"Since this is an older project, there are a few dependencies you might not currently have installed on your machine. This project requires that you have ",(0,r.kt)("a",{parentName:"p",href:"https://gruntjs.com/getting-started"},"Grunt"),", ",(0,r.kt)("a",{parentName:"p",href:"https://bower.io/"},"Bower"),", and ",(0,r.kt)("a",{parentName:"p",href:"https://sass-lang.com/"},"Sass")," installed to get up and running."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g grunt-cli\nnpm install -g bower\nnpm install -g sass\n")),(0,r.kt)("p",null,"With those dependencies installed, you can get started by typing the following command into your terminal:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:alocke12992/single-spa-angular-migration-starter.git\ncd single-spa-angular-migration-starter\nyarn\ncd public/assets\nbower install\n")),(0,r.kt)("p",null,"Run ",(0,r.kt)("inlineCode",{parentName:"p"},"grunt")," in the root directory to fire up a server at ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8080"),"."),(0,r.kt)("h2",{id:"step-one-create-a-single-spa-config"},"Step One: Create a single-spa config"),(0,r.kt)("p",null,"The single spa config consists of all code that is not part of a ",(0,r.kt)("a",{parentName:"p",href:"https://single-spa.js.org/docs/configuration.html#registeringapplications"},"registered application"),". Ideally, this only includes an HTML file and a JavaScript file that registers single-spa applications. It is best practice to keep your single spa config as small as possible and to simply defer to single-spa to manage all of the applications. The single spa config should not be doing client-side HTML rendering nor should it be responding to routing events such as ",(0,r.kt)("inlineCode",{parentName:"p"},"hashchange")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"popstate"),". Instead, all of that functionality should be taken care of either by single-spa itself or by a single-spa application."),(0,r.kt)("p",null,"It is required to ",(0,r.kt)("a",{parentName:"p",href:"https://single-spa.js.org/docs/configuration.html#registering-applications"},"register applications")," with single-spa. This enables single-spa to know how and when to bootstrap, mount and unmount an application. We will be creating a ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa.config.js")," file to house all of our single-spa logic."),(0,r.kt)("p",null,"Inside the ",(0,r.kt)("em",{parentName:"p"},"public/")," folder, create a ",(0,r.kt)("em",{parentName:"p"},"single-spa-config.js")," file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"touch public/single-spa.config.js\n")),(0,r.kt)("h3",{id:"a-importing-without-using-import"},"a) importing without using import"),(0,r.kt)("p",null,"Since we are using an older version of Angular, and we do not have access to babel, we cannot use ",(0,r.kt)("inlineCode",{parentName:"p"},"import")," or even ",(0,r.kt)("inlineCode",{parentName:"p"},"require()")," to obtain access to the single-spa library. One way around this is to include a ",(0,r.kt)("inlineCode",{parentName:"p"},"<script>")," tag in the project's HTML file which will provide us access to the library. Single-spa is hosted on ",(0,r.kt)("a",{parentName:"p",href:"https://unpkg.com/"},"https://unpkg.com/")," and when called, creates a global variable."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"public/index.html"),", add the following script tag at the bottom of the ",(0,r.kt)("inlineCode",{parentName:"p"},"<head>")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<head>\n  \x3c!-- ... --\x3e\n  <script src="https://unpkg.com/single-spa"><\/script>\n</head>\n')),(0,r.kt)("h3",{id:"b-connect-the-config-file"},"b) Connect the config file"),(0,r.kt)("p",null,"To get single-spa connected, we will need to include a script tag connecting the HTML file to single-spa.config.js (we will be building the single-spa.config.js file in the next step)."),(0,r.kt)("p",null,"Add the following ",(0,r.kt)("inlineCode",{parentName:"p"},"<script>")," at the bottom of ",(0,r.kt)("inlineCode",{parentName:"p"},"index.html")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<body>\n  \x3c!-- ... --\x3e\n  <script src="/assets/js/angular_drums.min.js"><\/script>\n  <script src="single-spa.config.js"><\/script>\n</body>\n')),(0,r.kt)("h2",{id:"step-two-register-the-application"},"Step Two: Register the application"),(0,r.kt)("p",null,"Now that our application has access to the single-spa library, we can use ",(0,r.kt)("inlineCode",{parentName:"p"},"window.singleSpa")," to call specific functions within the library. In order to register an application with single-spa we call the ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication()")," api and include the application ",(0,r.kt)("a",{parentName:"p",href:"configuration#application-name"},"name"),", a ",(0,r.kt)("a",{parentName:"p",href:"configuration#loading-function-or-application"},"loadingFunction")," and an ",(0,r.kt)("a",{parentName:"p",href:"configuration#activity-function"},"activityFunction"),"."),(0,r.kt)("p",null,"Finally, the ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/api#start"},"start()")," api ",(0,r.kt)("strong",{parentName:"p"},"must")," be called by your single spa config in order for applications to actually be mounted. Before ",(0,r.kt)("inlineCode",{parentName:"p"},"start()")," is called, applications will be loaded, but not bootstrapped/mounted/unmounted."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note that since we are not using Babel, we cannot use the ES6 ",(0,r.kt)("inlineCode",{parentName:"em"},"const"),", ",(0,r.kt)("inlineCode",{parentName:"em"},"let"),", or ",(0,r.kt)("inlineCode",{parentName:"em"},"arrow functions"),".")),(0,r.kt)("p",null,"Start by stubbing out the registration function by adding the following in ",(0,r.kt)("inlineCode",{parentName:"p"},"public/single-spa.config.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="public/single-spa.config.js"',title:'"public/single-spa.config.js"'},"window.singleSpa.registerApplication(\n  'drum-machine',\n  loadingFunction,\n  function activityFunction() {\n    return true;\n  },\n);\n\nwindow.singleSpa.start();\n")),(0,r.kt)("p",null,"The second argument in ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"loadingFunction"),", must be a function that returns a promise (or an ",(0,r.kt)("a",{parentName:"p",href:"https://ponyfoo.com/articles/understanding-javascript-async-await"},'"async function"'),"). The function will be called with no arguments when it's time to load the application for the first time. The returned promise must be resolved with the application. We will be creating this in the next step."),(0,r.kt)("p",null,"The third argument, ",(0,r.kt)("inlineCode",{parentName:"p"},"activityFunction"),", must be a pure function. The function is provided ",(0,r.kt)("inlineCode",{parentName:"p"},"window.location")," as the first argument, and returns a truthy value whenever the application should be active. In this case we have set the activity function to return true. This will set our SPA to always be mounted regardless of the location. Later, if we wanted to add other SPAs to our single-spa web application, we can change the activity function to return based on ",(0,r.kt)("inlineCode",{parentName:"p"},"location.hash.startsWith('#/someRoute')"),"."),(0,r.kt)("h2",{id:"step-three-setup-lifecycle-functions"},"Step Three: Setup Lifecycle Functions"),(0,r.kt)("p",null,"Since we have registered our application, single-spa will be listening for the application to ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrap")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"mount"),". We can use the ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/ecosystem-angularjs"},"single-spa-angularjs")," helper library which will handle generic lifecycle hooks (bootstrap, mount and unmount) for registered angularjs applications."),(0,r.kt)("p",null,"To gain access to the ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-angularjs")," library, we will need to include another ",(0,r.kt)("inlineCode",{parentName:"p"},"<script>")," tag in our HTML file."),(0,r.kt)("p",null,"Add the following in ",(0,r.kt)("inlineCode",{parentName:"p"},"public/index.html")," at the very bottom of the ",(0,r.kt)("inlineCode",{parentName:"p"},"<head>"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<head>\n  ...\n  <script src="https://unpkg.com/single-spa"><\/script>\n  <script src="https://unpkg.com/single-spa-angularjs"><\/script>\n</head>\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You may want to read more about ",(0,r.kt)("a",{parentName:"p",href:"https://eager.io/blog/everything-I-know-about-the-script-tag/"},"the importance of ",(0,r.kt)("inlineCode",{parentName:"a"},"<script>")," tag order"),"."))),(0,r.kt)("p",null,"Now that our application has access to the ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-angularjs")," library, we can set up the ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/building-applications#registered-application-lifecycle"},"application lifecycle"),". Add the following code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="public/single-spa.config.js"',title:'"public/single-spa.config.js"'},"var drumMachineApp = window.singleSpaAngularjs.default({\n  angular: window.angular,\n  domElementGetter: function() {\n    // A div with this id will be added to our index.html later, in step four\n    return document.getElementById('drum-machine')\n  },\n  mainAngularModule: 'AngularDrumMachine',\n  uiRouter: false,\n  preserveGlobal: true,\n  // This template will be built in step four\n  template: '<display-machine />',\n})\n...\n")),(0,r.kt)("p",null,"With our app's lifecycle function defined, we can now include it in our ",(0,r.kt)("inlineCode",{parentName:"p"},"registerApplication")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'{4} title="public/single-spa.config.js"',"{4}":!0,title:'"public/single-spa.config.js"'},"...\nwindow.singleSpa.registerApplication(\n  'drum-machine',\n  drumMachineApp,\n  function activityFunction(location) {\n    return true;\n  }\n)\n\nwindow.singleSpa.start();\n")),(0,r.kt)("h2",{id:"step-four-adjust-your-html-file"},"Step Four: Adjust your HTML file"),(0,r.kt)("p",null,"Since most existing SPAs are used to having control of an ",(0,r.kt)("em",{parentName:"p"},"index.html")," file for their css, fonts, third party script-tags, etc., it's likely that you'll have to do some work to make sure all of those keep on working when your SPA becomes an html-less application."),(0,r.kt)("p",null,"In this case, we are going to have to make a few adjustments to the current ",(0,r.kt)("em",{parentName:"p"},"index.html")," to make sure that the SPA is not mounted until single-spa tells it to."),(0,r.kt)("h3",{id:"a-prevent-auto-bootstrapping"},"a) Prevent auto bootstrapping"),(0,r.kt)("p",null,"Currently, our ",(0,r.kt)("em",{parentName:"p"},"index.html")," contains two hurdles we will need to overcome to allow single-spa to control the DOM. The first is the auto-bootstrap directive ",(0,r.kt)("a",{parentName:"p",href:"https://docs.angularjs.org/api/ng/directive/ngApp"},(0,r.kt)("inlineCode",{parentName:"a"},"ng-app"))," at the top of the HTML file. If left in the HTML file, ",(0,r.kt)("inlineCode",{parentName:"p"},"ng-app")," will force the entire application to automatically bootstrap and render, overriding the single-spa lifecycle functions. To fix this, we simply need to remove ",(0,r.kt)("inlineCode",{parentName:"p"},"ng-app")," from the HTML file and then allow ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-angularjs")," to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrap")," function instead (recall that we set this up in ",(0,r.kt)("a",{parentName:"p",href:"/docs/4.x/migrating-angularJS-tutorial#step-three-setup-lifecycle-functions"},"Step Three"),")."),(0,r.kt)("p",null,"In ",(0,r.kt)("em",{parentName:"p"},"index.html")," remove ",(0,r.kt)("inlineCode",{parentName:"p"},'ng-app="AngularDrumMachine'),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n\x3c!-- Remove ng-app --\x3e\n<html lang="en-us">\n  \x3c!-- ... --\x3e\n</html>\n')),(0,r.kt)("h3",{id:"b-create-a-template"},"b) Create a Template"),(0,r.kt)("p",null,"The second challenge is that the ",(0,r.kt)("em",{parentName:"p"},"index.html")," currently holds the entire application template. Since HTML will automatically render anything in the file, we will need to pull all of the SPAs logic out of the HTML file and replace it with a new ",(0,r.kt)("inlineCode",{parentName:"p"},"<div />")," containing the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," single-spa will use to mount the application. To do this, we will create a new template that we can then provide to the ",(0,r.kt)("inlineCode",{parentName:"p"},"single-spa-angularjs")," lifecycle function."),(0,r.kt)("p",null,"Create a new directory inside of ",(0,r.kt)("em",{parentName:"p"},"public/assets")," called ",(0,r.kt)("em",{parentName:"p"},"templates/"),". Then create a new template called ",(0,r.kt)("em",{parentName:"p"},"display-machine.template.html"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir public/assets/templates\ntouch public/assets/templates/display-machine.template.html\n")),(0,r.kt)("p",null,"Then, remove lines 24 - 83 from ",(0,r.kt)("em",{parentName:"p"},"index.html")," and paste them inside of ",(0,r.kt)("em",{parentName:"p"},"display-machine.template.html"),". You will also need to remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"ng-view")," directive in the ",(0,r.kt)("inlineCode",{parentName:"p"},"<body>")," tag. Once removed, add a new ",(0,r.kt)("inlineCode",{parentName:"p"},"<div>")," containing the id single-spa will use to mount the SPA."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"index.html")," should now look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<body>\n  \x3c!-- Notice that this id was set when we built the lifecycle functions in step three --\x3e\n  <div id="drum-machine" />\n  <script src="/assets/js/angular_drums.min.js"><\/script>\n  <script src="single-spa.config.js"><\/script>\n</body>\n')),(0,r.kt)("p",null,"The new template ",(0,r.kt)("em",{parentName:"p"},"display-machine.template.html")," should look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<a class="show-for-medium-up" href="https://github.com/dougjohnston/angular-drum-machine">\n  <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"\n    alt="Fork me on GitHub">\n</a>\n<div id="container" class="row">\n  <div class="large-12 large-centered columns" ng-controller="DrumMachineCtrl as dm">\n    <header>\n      <h1>Angular Drum Machine</h1>\n      <div id="loading-wrap" ng-show="loading">\n        <div class="loading loading-outer">\n          <div class="loading loading-inner"></div>\n        </div>\n        <h3>loading...</h3>\n      </div>\n    </header>\n\n    <div id="controls" ng-hide="loading">\n      <button id="play" class="button small success radius" ng-click="playLoop()">Play</button>\n      <button id="pause" class="button small alert radius" ng-click="stopLoop()">Stop</button>\n      <button id="reset" class="button small radius" ng-click="resetLoop()">Clear</button>\n      <div id="readout">\n        <span id="tempo">\n          <input type="range" min="60" max="180" ng-change="updateTempo()" ng-model="tempo">\n          <input id="bpmEdit" type="text" min="60" max="180" ng-change="updateTempo()" ng-blur="CloseEdit()" ng-model="tempo" style="width:50px;display:none;">\n          <span id="bpm" ng-click="EditBPM()">{{tempo}} bpm</span>\n        </span>\n      </div>\n    </div>\n\n    <ul id="dm-grid" ng-hide="loading">\n      <li class="dm-header">\n        <ul>\n          <li class=\'instrument-name\'></li>\n          <li class=\'beat-num\' data-ng-repeat="i in [] | range:machine.gridLength()">\n            <div ng-class="{true: \'current-beat\'}[($index + 1) === machine.currentBeat()]">{{$index + 1}}</div>\n          </li>\n        </ul>\n      </li>\n      <li class="dm-row" ng-repeat="row in machine.rows()">\n        <ul class="instrument">\n          <li class=\'instrument-name\'>\n            {{row.getInstrument().getName()}}\n            <br>\n            <span>{{row.getInstrument().getDescription()}}\n              <span>\n          </li>\n          <li data-ng-repeat="beat in row.getBeats()">\n            <button class="btn" ng-class="{\'btn-on\':beat.isActive()}" ng-click="beat.toggle()">\n              <div></div>\n            </button>\n          </li>\n        </ul>\n      </li>\n    </ul>\n\n    <footer ng-hide="loading">\n      Developed by\n      <a href="http://www.dojosto.com">Doug Johnston</a> using\n      <a href="http://angularjs.org/">AngularJS</a>.\n      <br>Drum loops provided by\n      <a href="http://www.musicradar.com/news/tech/free-music-samples-download-loops-hits-and-multis-217833/65">Music Radar</a>.\n    </footer>\n\n    <aside class="msg-play show-for-large-up" ng-class="{\'faded\': fade_msg_play}" ng-hide="loading"></aside>\n  </div>\n')),(0,r.kt)("h3",{id:"c-create-a-directive"},"c) Create a Directive"),(0,r.kt)("p",null,"Per the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.angularjs.org/guide/directive"},"AngularJS conventions"),', we will need to create a directive in order to "compile" our new HTML template. Let\'s start by creating a new ',(0,r.kt)("em",{parentName:"p"},"directives/")," folder inside ",(0,r.kt)("em",{parentName:"p"},"public/app")," to house a new ",(0,r.kt)("em",{parentName:"p"},"display-machine.directive.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir public/app/directives\ntouch public/app/directives/display-machine.directive.js\n")),(0,r.kt)("p",null,"Then, inside of ",(0,r.kt)("inlineCode",{parentName:"p"},"display-machine.directive.js"),' we will register our new directive on the "AngularDrumMachine" module, restrict the directive to be triggered by a class name using the ',(0,r.kt)("inlineCode",{parentName:"p"},"E")," option, and tell it to load our template using the ",(0,r.kt)("inlineCode",{parentName:"p"},"templateUrl")," option."),(0,r.kt)("p",null,"Add the following code to ",(0,r.kt)("em",{parentName:"p"},"public/app/directives/display-machine.directive.js"),"`","*",":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"'use strict';\n\nangular.module('AngularDrumMachine').directive('displayMachine', [\n  function() {\n    return {\n      restrict: 'E',\n      templateUrl: 'assets/templates/display-machine.template.html',\n    };\n  },\n]);\n")),(0,r.kt)("h1",{id:"thats-it"},"That's it"),(0,r.kt)("p",null,"Head back to the console and start up the server on ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080")," by running ",(0,r.kt)("inlineCode",{parentName:"p"},"grunt")," from the root directory."),(0,r.kt)("p",null,"Inspect the page and notice that our drum-machine app is now being rendered inside of the ",(0,r.kt)("inlineCode",{parentName:"p"},'<div id="drum-machine"/>')," we created. Technically, we are back to square one, with a fully functioning SPA. However, now that our SPA is a registered single-spa application we can take advantage of single-spa's functionality by building additional applications to mount side by side with our current AngularJS SPA."),(0,r.kt)("p",null,"Feel free to start using that new JavaScript framework everyone has been talking about."))}d.isMDXComponent=!0}}]);